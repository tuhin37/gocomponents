# Runner example - New Line Callback

Furthermore, you have the capability to attach a user-defined function as a new line callback function. This function will be triggered every time the system command generates a new line, and the new line string itself will be injected into the callback function. This feature can be utilized for tasks such as calculating estimated time of arrival (ETA) and tracking progress. To attach the callback function, you need to use the `.SetOnNewLineCallback()` method.

---

Example-1

```go
package main

import (
    "fmt"

    "github.com/tuhin37/gocomponents/runner"
)

var runr *runner.Runner
var lineCount int = 0    // global variable 

func init() {
    runr = runner.NewRunner("ping 8.8.8.8 -c 5")
    runr.SetOnNewLineCallback(onNewLineCallback) // set new line callback function
}

func main() {
    runr.Execute()
}

// callback function
func onNewLineCallback(line []byte) {
    fmt.Println(lineCount+1, ": ", string(line))
    lineCount += 1
}
```

Output

```shell
1 :  PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
2 :  64 bytes from 8.8.8.8: icmp_seq=1 ttl=59 time=11.9 ms
3 :  64 bytes from 8.8.8.8: icmp_seq=2 ttl=59 time=18.7 ms
4 :  64 bytes from 8.8.8.8: icmp_seq=3 ttl=59 time=13.8 ms
5 :  64 bytes from 8.8.8.8: icmp_seq=4 ttl=59 time=15.3 ms
6 :  64 bytes from 8.8.8.8: icmp_seq=5 ttl=59 time=13.9 ms
7 :  
8 :  --- 8.8.8.8 ping statistics ---
9 :  5 packets transmitted, 5 received, 0% packet loss, time 4006ms
10 :  rtt min/avg/max/mdev = 11.882/14.699/18.660/2.256 ms
```

The output makes it clear that the callback function `onNewLineCallback()` was triggered for each new line. This function appended a line number as a prefix to the line generated by the system call. Additionally, the line number acted as a global variable, incrementing by one each time the function was executed.
