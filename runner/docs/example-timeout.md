# Runner example - Timeout

You have the option to include a timeout (in seconds) with a runner object. Setting a positive timeout value enables the runner to forcibly terminate the system call if it exceeds the specified duration.

If the system call times out, the `status` property of the runner object will automatically be set to `TIMEDOUT`.

---

Example-1 (simple)

```go
package main

import (
    "fmt"

    "github.com/tuhin37/gocomponents/runner"
)

var runr *runner.Runner

func init() {
    runr = runner.NewRunner("ping 8.8.8.8") // instantiate a runner wirh a system command
    runr.SetTimeout(3)
    runr.EnableConsole()
}

func main() {
    runr.Execute()
    fmt.Println("Status: ", runr.GetStatus())
}
```

In the example above 

- A runner object is created with a system command `ping 8.8.8.8`, which runs indefinitely.

- The runner object is configured with a timeout value of 3 seconds.

- Console logging is enabled to display the system command's output in real-time on the terminal.

- The runner is executed as a blocking function.

- After 3 seconds, the runner times out, forcibly terminating the system call.

- Finally, the `status` property of the runner object is printed on the console.

Output

```shell
PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_seq=1 ttl=59 time=17.3 ms
64 bytes from 8.8.8.8: icmp_seq=3 ttl=59 time=13.4 ms
Status:  TIMEDOUT
```

---

Example-2 (with callback)

```go
package main

import (
    "fmt"

    "github.com/tuhin37/gocomponents/runner"
)

var runr *runner.Runner

func init() {
    runr = runner.NewRunner("ping 8.8.8.8") // instantiate a runner wirh a system command
    runr.SetTimeout(3, timeoutCallback)
}

func main() {
    runr.Execute()
}

func timeoutCallback(r *runner.Runner) {
    fmt.Println(r.Logs())
    fmt.Println("State: ", r.GetStatus())
}
```

In the example above 

- A runner object is initialized with a system command `ping 8.8.8.8`, intended to run indefinitely.

- The runner object is set with a timeout value of 3 seconds. Additionally, a callback function named `timeoutCallback` is provided and attached via the `SetTimeout()` method.

- The runner is executed synchronously, functioning as a blocking operation.

- Upon reaching the 3-second timeout threshold, the runner forcibly terminates the ongoing system call.

- Following the timeout event, the runner invokes the `timeoutCallback`, passing the runner object as an argument.

- Within the `timeoutCallback`, the logs generated by the system call are printed.

- Furthermore, the `status` of the runner object is also printed within the callback function.

Output

```sh
PING 8.8.8.8 (8.8.8.8) 56(84) bytes of data.
64 bytes from 8.8.8.8: icmp_seq=1 ttl=59 time=13.3 ms
64 bytes from 8.8.8.8: icmp_seq=2 ttl=59 time=14.8 ms
64 bytes from 8.8.8.8: icmp_seq=3 ttl=59 time=15.3 ms

State:  TIMEDOUT
```
